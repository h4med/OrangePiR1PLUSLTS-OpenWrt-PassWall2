<div dir="rtl">

### فهرست مطالب

- [مقدمات](#مقدمات)
- [گام اول. سخت افزار](#گام-اول-سختافزار)
- [گام دوم: ریختن Image](#گام-دوم-ریختن-image)
- [گام سوم: پیکربندی OpenWrt](#گام-سوم-پیکربندی-openwrt)
- [گام چهارم: پیکربندی PassWall2](#گام-چهارم-پیکربندی-passwall2)

## مقدمات

در این ریپو نحوه‌ی راه‌اندازی یک فیلترشکن سخت‌افزاری با استفاده از یک SBC ارزان قیمت به نام OrangePi R1 PLUS LTS تشریح خواهد شد.
ساختار کلی عملکرد مطابق شکل زیر است.

![بلوک دیاگرام کلی استفاده از بورد به عنوان روتر](./pics/2_openwrt_passwall2_blockdiagram.png "OrangePi R1 PLUS LTS as a router")

**نکته۱**: در این آموزش ممکن است لینک‌هایی به سایت‌های فروش یا آموزشهای دیگر داده شود. این لینکها صرفا جهت راهنمایی خودم و شماست و هیچگونه جنبه‌ی تبلیغاتی نداشته و من نفعی از آن نمی‌برم.

**نکته۲**: شما می‌توانید با راهنماهای موجود در یوتیوب، مثل [این](https://www.youtube.com/watch?v=m-BAyaHNlV8)  یا سلسله راهنماهای [اینجا](https://ivpn.pro/category/openwrt/) از پایه OpenWrt را نصب کرده و سپس PassWall2 را نصب کرده و تک تک روشها را پیاده‌سازی کنید. اما بدلیل مشکلات اینترنت در ایران انجام این مراحل مشکلات زیادی دارد و همچنین ممکن است انجام آن برای همه راحت نباشد. استفاده از یک Image آماده کار شما را راحت خواهد کرد.


## گام اول: سخت‌افزار
بورد Orange Pi R1 PLUS LTS یک پردازنده‌ی ۴ هسته ۶۴ بیتی با فرکانس 1.5GHz دارد و با داشتن 1GB RAM یک سخت‌افزار مناسب برای یک روتر خانگی است. مشخصات این بورد را از [سایت سازنده](http://www.orangepi.org/html/hardWare/computerAndMicrocontrollers/details/orange-pi-R1-Plus-LTS.html) می‌توانید ببنید.

این بورد در بازار ایران نیز قابل تهیه است و مثلا در حال حاضر (مهر ۱۴۰۳) از وبسایت eca با قیمت ۲/۶۰۰/۰۰۰ تومان قابل تهیه است [لینک](https://eshop.eca.ir/%D8%AE%D8%A7%D9%86%D9%88%D8%A7%D8%AF%D9%87-orange-pi/21222-%D8%A8%D8%B1%D8%AF-%D8%A7%D9%88%D8%B1%D9%86%D8%AC-%D9%BE%D8%A7%DB%8C-orange-pi-r1-plus-lts-%D8%A8%D8%A7-%D8%B1%D9%85-1gb.html).


علاوه بر خود بورد برای راه‌اندازی آن به موارد زیر نیز نیاز است:
- آداپتور تغذیه 5V/3A با پورت Type C
- حافظه Micro SD حداقل 2GB به بالا

و همچنین لوازم جانبی مثل لپتاپ/کامپیوتر با پورت میکرو SD یا داشتن یک تبدیل میکروSD به USB و کابل شبکه برای ارتباط با روتر/SBC.

## گام دوم: ریختن Image
به مرور Imageهای آماده مختلف به صورت Shrink و فشرده شده برای استفاده با این بورد رار قرارخواهم داد. Image مدنظر خود را از جدول زیر دانلود کنید.

| عنوان | لینک دانلود | توضیحات |
| -------- | -------- | -------------------------------- |
| خام  | [لینک](https://github.com/h4med/OrangePiR1PLUSLTS-OpenWrt-PassWall2/raw/refs/heads/main/img0_Raw_v1.zip)   | OpenWrt 23.05 + PassWall2 |
| خام+WarpPlus  |  [لینک](https://github.com/h4med/OrangePiR1PLUSLTS-OpenWrt-PassWall2/raw/refs/heads/main/img1_WarpPlus_v1.zip) | OpenWrt 23.05 + PassWall2 + WarpPlus Service |


ابتدا Image مدنظر را که با فرمت Zip فشرد شده است با نرم‌افزارهایی همچون 7Zip یا نرم‌افزارهای پیش‌فرض سیستم عامل خود از حالت فشرده خارج کنید. سایز آن حدود ۲۰۰-۳۰۰ مگابایت خواهد شد.

سپس با نرم‌افزاری همچون Win32DiskImager آنرا روی حافظه‌ی MicroSD مدنظر خود بریزید. با توجه به اینکه Image به صورت Shrink شده است، می‌توانید آن را روی هر حافظه‌ای از سایز 512MB به بالا بریزید. نرم‌افزار DiskImager را می‌توانید [از اینجا](https://sourceforge.net/projects/win32diskimager/) دانلود کنید. درصورتی که از حافظه‌ای استفاده می‌کنید که قبلا استفاده شده است بهتر است یکبار آن‌را با SD Card Formatter فرمت کنید [از اینجا](https://www.sdcard.org/downloads/formatter/).


## گام سوم: پیکربندی OpenWrt
پس از برقدار کردن در صورتی که همه چیز بدرستی انجام شده باشد، و پورت WAN  به مودم و پورت LAN به لپتاپ/پی‌سی متصل باشد باید چراغ قرمز چشمک زده و چراغ‌های زردرنگ مرتبط با LAN و WAN چشمک بزنند.

پورت WAN: به صورت DHCP Client تنظیم شده است و از مودم/روتر اصلی که اینترنت را تامین می‌کند IP در رنج مودم خواهد گرفت.

پورت LAN: به صورت DHCP Server تعریف شده است و در رنج **192.168.123.1/24** به تجهیزاتی که به آن متصل شوند IP خواهد داد.


ابتدا در سیستمی که به SBC متصل کرده‌اید مطمين شوید در رنج بالا بدرستی IP گرفته باشد سپس یک مرورگر بازکرده و آدرس ```http://192.168.123.1``` را باز کنید. با اینکار وارد صفحه تنظیمات روتر می‌شوید. نام کاربری ```root``` است و رمز عبور نیز ```1``` است (عدد یک).
پیشنهاد می‌شود در گام اول رمزعبورد پیشفرض عوض شود.
سپس می‌توانید با مراجعه به بخش Interfaces رنج IP مدنظر خود را برای LAN تنظیم کنید.

پس از ان در گام بعد به سراع تنظیمات PassWall2 می‌رویم.


## گام چهارم: پیکربندی PassWall2
TODO


</div>
